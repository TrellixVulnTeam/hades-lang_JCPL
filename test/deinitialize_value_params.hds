import hades.drop as Drop;
import libc as c;
const puts = c.puts;

def main(): Void {
    puts(b"creating S");
    val s = S(b"1");
    puts(b"calling f with 1");
    f(s);
    puts(b"f returned");

    puts(b"calling f with 2");
    f(S(b"2"));
    puts(b"f returned");
}

def f(s: S): Void {}

struct S {
    val message: *Byte;
}

implement Drop.Drop for S {
    def drop(this: *mut S): Void {
        puts(*this.message);
    }
}

