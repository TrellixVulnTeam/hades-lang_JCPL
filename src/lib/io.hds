import libc as c;
import lib.assert as Assert;
import lib.slice as Slice;

const assert = Assert.assert;

struct Stream {
    val m_file: *c.File;
}

def read(this: Stream, buffer: Slice.t[Byte], max_number_of_bytes: Size): Size {
    assert(max_number_of_bytes <= buffer.size());
    return c.fread(pointer_cast[Void](buffer.buffer()), 1, max_number_of_bytes, this.m_file);
}

